<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>使用H5的Web存储实现具有历史搜索记录功能的页面</title>
</head>
<body>
    <form action="#" style="width:400px; height:200px;">
            <input id="content" type="text" style=" width: 200px; height: 40px; border-color: orange; border-radius: 3px; font-size: 13px;" placeholder="请输入想查找的商品" autofocus="autofocus">
            <button id="search"  style="width:150px; height:40px; color: gray; font-size: 14px;">搜索</button>
            <div style="margin-bottom:10px;">最近搜索</div>
            <div style="width:380px; height: 100px; float: left; word-break: break-all;">
                <div id="text"></div>
            </div>
            <div id="clear" style="width: 20px; height:20px; position: fixed; top:220px; left: 350px; color:white; background-color: rgb(180, 179, 179);">&nbsp;X</div>   
    </form>  
</body>
<script> 
        var content = document.getElementById("content");
        var search = document.getElementById("search");
        var text = document.getElementById("text");
        var clear = document.getElementById("clear");
                
        window.onload=function(){
            //显示
            for (var i = 0; i < localStorage.length; i++) {
                var key = localStorage.key(i);
                var value = localStorage.getItem(key);
                if(value!=""){
                    text.innerHTML+="<span style='display:inline-block; margin:5px 10px 5px 0px;background-color:rgb(180, 179, 179);'>"+value+"</span>";
                }
            } 
        }
        search.onclick = function(){
            //存储
            var data = content.value;
            var time = new Date().getTime();
            localStorage.setItem(time,data);
            text.innerHTML+="<span style='display:inline-block; margin:5px 10px 5px 0px;background-color:rgb(180, 179, 179);'>"+data+"</span>";    
            content.value="";       
        }    
        clear.onclick = function(){
            localStorage.clear();
            text.innerHTML="";
        }       
</script>
</html>
